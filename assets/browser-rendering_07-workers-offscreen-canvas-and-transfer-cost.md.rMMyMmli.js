import{f as s,D as t,c as n,o as i,k as r,a4 as o,H as c,a}from"./chunks/framework.BAs4fWuZ.js";const b=JSON.parse('{"title":"Workerï¼šæ”¶ç›Šè¾¹ç•Œã€OffscreenCanvas ä¸é€šä¿¡æˆæœ¬","description":"","frontmatter":{"title":"Workerï¼šæ”¶ç›Šè¾¹ç•Œã€OffscreenCanvas ä¸é€šä¿¡æˆæœ¬","date":"2026-01-20T00:00:00.000Z","categories":"study","tags":["browser-rendering","webworker","offscreen-canvas","performance","structured-clone"]},"headers":[],"relativePath":"browser-rendering/07-workers-offscreen-canvas-and-transfer-cost.md","filePath":"browser-rendering/07-workers-offscreen-canvas-and-transfer-cost.md","lastUpdated":1769026429000}'),d={name:"browser-rendering/07-workers-offscreen-canvas-and-transfer-cost.md"};function f(u,e,p,h,k,_){const l=t("InkMermaidBlock");return i(),n("div",null,[e[0]||(e[0]=r("div",{class:"alert read-stats",role:"note"},[r("span",{class:"read-stats__icon","aria-hidden":"true"},"ğŸ”–"),r("span",{class:"read-stats__text"},[a("æœ¬æ–‡çº¦ "),r("b",null,"847"),a(" å­—ï¼Œé˜…è¯»é¢„è®¡è€—æ—¶ "),r("b",null,"3"),a(" åˆ†é’Ÿã€‚")])],-1)),e[1]||(e[1]=r("div",{class:"alert ai-disclosure",role:"note"},[r("span",{class:"ai-disclosure__icon","aria-hidden":"true"},"â“˜"),r("span",{class:"ai-disclosure__text"},"AI è¾…åŠ©å†™ä½œå£°æ˜ï¼šæœ¬æ–‡ç”±åšä¸»æ„æ€é€»è¾‘ï¼ŒAI è¾…åŠ©æ¶¦è‰²ï¼ŒåŒæ–¹å…±åŒæ ¡å¯¹ã€‚")],-1)),e[2]||(e[2]=o('<p>å¾ˆå¤šå›¢é˜ŸæŠŠâ€œä¸Š Workerâ€å½“æˆæ€§èƒ½ä¼˜åŒ–çš„é“¶å¼¹ï¼šä¸»çº¿ç¨‹å¿™ï¼ŸæŒªå‡ºå»ã€‚é—®é¢˜æ˜¯ï¼Œè¿™ä¸ªåŠ¨ä½œåªå¯¹ä¸€ç±»æˆæœ¬æœ‰æ•ˆâ€”â€”<strong>çº¯è®¡ç®—</strong>ã€‚è€Œæµè§ˆå™¨æ¸²æŸ“é“¾è·¯é‡Œæœ€ç¡¬çš„ä¸€éƒ¨åˆ†ï¼ˆstyle/layout/paint/composite/rasterï¼‰å¹¶ä¸ä¼šå› ä¸ºä½ æŒªèµ° JS å°±è‡ªåŠ¨å˜å¿«ã€‚</p><p>è¿™ä¸€ç« çš„ç›®æ ‡æ˜¯æŠŠ Worker çš„æ”¶ç›Šè¾¹ç•Œè®²æ¸…æ¥šï¼Œå¹¶è¯´æ˜ OffscreenCanvas è¿™æ¡â€œè®© Worker å‚ä¸ç”»ç”»â€çš„è·¯å¾„ä¸ºä»€ä¹ˆæ—¢å¼ºå¤§åˆå®¹æ˜“è¸©å‘ã€‚</p><h2 id="_1-worker-å®¶æ—-åˆ«æŠŠå®ƒä»¬å½“æˆä¸€ç§ä¸œè¥¿" tabindex="-1">1. Worker å®¶æ—ï¼šåˆ«æŠŠå®ƒä»¬å½“æˆä¸€ç§ä¸œè¥¿ <a class="header-anchor" href="#_1-worker-å®¶æ—-åˆ«æŠŠå®ƒä»¬å½“æˆä¸€ç§ä¸œè¥¿" aria-label="Permalink to &quot;1. Worker å®¶æ—ï¼šåˆ«æŠŠå®ƒä»¬å½“æˆä¸€ç§ä¸œè¥¿&quot;">â€‹</a></h2><ul><li>Dedicated Workerï¼šæœ€å¸¸è§ï¼Œç”¨äºæŠŠè®¡ç®—æŒªå‡ºä¸»çº¿ç¨‹</li><li>Shared Workerï¼šå¤šä¸ªé¡µé¢å…±äº«ï¼ˆç°å®é‡Œå°‘ç”¨ï¼Œç”Ÿæ€ä¸é™åˆ¶æ›´å¤šï¼‰</li><li>Service Workerï¼šåç½‘ç»œ/ç¼“å­˜/ç¦»çº¿çš„ä¸­é—´å±‚ï¼Œä¸ç›´æ¥å‚ä¸æ¸²æŸ“</li></ul><p>è¿™é‡Œè®¨è®ºçš„â€œæ€§èƒ½ä¼˜åŒ–ä¸Š Workerâ€ï¼Œé»˜è®¤æŒ‡ Dedicated Workerã€‚</p><h2 id="_2-ç»“æ„åŒ–å…‹éš†-structured-clone-è·¨çº¿ç¨‹ä¸æ˜¯å…è´¹" tabindex="-1">2. ç»“æ„åŒ–å…‹éš†ï¼ˆstructured cloneï¼‰ï¼šè·¨çº¿ç¨‹ä¸æ˜¯å…è´¹ <a class="header-anchor" href="#_2-ç»“æ„åŒ–å…‹éš†-structured-clone-è·¨çº¿ç¨‹ä¸æ˜¯å…è´¹" aria-label="Permalink to &quot;2. ç»“æ„åŒ–å…‹éš†ï¼ˆstructured cloneï¼‰ï¼šè·¨çº¿ç¨‹ä¸æ˜¯å…è´¹&quot;">â€‹</a></h2><p>ä¸»çº¿ç¨‹ä¸ Worker é€šä¿¡çš„é»˜è®¤æ–¹å¼æ˜¯ <code>postMessage</code>ã€‚å®ƒèƒŒåé€šå¸¸æ„å‘³ç€ï¼š</p><ul><li>åºåˆ—åŒ–/ååºåˆ—åŒ–ï¼ˆstructured cloneï¼‰</li><li>ä»»åŠ¡æ’é˜Ÿï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ï¼‰</li><li>å¯èƒ½çš„æ‹·è´ï¼ˆå°¤å…¶å¤§å¯¹è±¡/æ·±å±‚å¯¹è±¡ï¼‰</li></ul><p>å› æ­¤ä¸€ä¸ªå…¸å‹åç›´è§‰æ˜¯ï¼šä½ æŠŠè®¡ç®—æŒªåˆ° Workerï¼Œä½†æ¯å¸§æŠŠä¸€å¤§å¨ç»“æœä¼ å›æ¥ï¼Œåè€Œæ›´å¡ã€‚</p><h3 id="_2-1-transferable-æŠŠ-æ‹·è´-å˜æˆ-è½¬ç§»æ‰€æœ‰æƒ" tabindex="-1">2.1 Transferableï¼šæŠŠâ€œæ‹·è´â€å˜æˆâ€œè½¬ç§»æ‰€æœ‰æƒâ€ <a class="header-anchor" href="#_2-1-transferable-æŠŠ-æ‹·è´-å˜æˆ-è½¬ç§»æ‰€æœ‰æƒ" aria-label="Permalink to &quot;2.1 Transferableï¼šæŠŠâ€œæ‹·è´â€å˜æˆâ€œè½¬ç§»æ‰€æœ‰æƒâ€&quot;">â€‹</a></h3><p>å¯¹ <code>ArrayBuffer</code> è¿™ç±»å¯¹è±¡ï¼ŒTransferable å¯ä»¥æŠŠæˆæœ¬ä»â€œæ‹·è´â€å˜æˆâ€œæ‰€æœ‰æƒè½¬ç§»â€ã€‚å®ƒé€šå¸¸æ›´å¿«ï¼Œä½†å¸¦æ¥æ–°çš„çº¦æŸï¼š</p><ul><li>ä¸»çº¿ç¨‹å‘é€å buffer åœ¨ä¸»çº¿ç¨‹ä¾§ä¼šå˜â€œä¸å¯ç”¨â€</li><li>ä½ éœ€è¦è®¾è®¡å¥½åŒç¼“å†²/ç¯å½¢ç¼“å†²ï¼Œé¿å…é¢‘ç¹åˆ†é…æ–° buffer</li></ul><h3 id="_2-2-sharedarraybuffer-å…±äº«å¸¦æ¥é€Ÿåº¦-ä¹Ÿå¸¦æ¥æ²»ç†æˆæœ¬" tabindex="-1">2.2 SharedArrayBufferï¼šå…±äº«å¸¦æ¥é€Ÿåº¦ï¼Œä¹Ÿå¸¦æ¥æ²»ç†æˆæœ¬ <a class="header-anchor" href="#_2-2-sharedarraybuffer-å…±äº«å¸¦æ¥é€Ÿåº¦-ä¹Ÿå¸¦æ¥æ²»ç†æˆæœ¬" aria-label="Permalink to &quot;2.2 SharedArrayBufferï¼šå…±äº«å¸¦æ¥é€Ÿåº¦ï¼Œä¹Ÿå¸¦æ¥æ²»ç†æˆæœ¬&quot;">â€‹</a></h3><p>SharedArrayBuffer å…è®¸å…±äº«å†…å­˜ï¼Œé…åˆ Atomics å¯ä»¥åšä½å»¶è¿Ÿåä½œã€‚ä½†å®ƒå—å®‰å…¨ç­–ç•¥çº¦æŸï¼ˆä¾‹å¦‚ cross-origin isolationï¼‰ï¼Œå¹¶ä¸”éœ€è¦æ›´ä¸¥è°¨çš„å¹¶å‘è®¾è®¡ã€‚</p><h2 id="_3-worker-èƒ½è§£å†³ä»€ä¹ˆ-æŠŠ-è®¡ç®—å¯†é›†-ä¸-æ¸²æŸ“æäº¤-æ‹†å¼€" tabindex="-1">3. Worker èƒ½è§£å†³ä»€ä¹ˆï¼šæŠŠâ€œè®¡ç®—å¯†é›†â€ä¸â€œæ¸²æŸ“æäº¤â€æ‹†å¼€ <a class="header-anchor" href="#_3-worker-èƒ½è§£å†³ä»€ä¹ˆ-æŠŠ-è®¡ç®—å¯†é›†-ä¸-æ¸²æŸ“æäº¤-æ‹†å¼€" aria-label="Permalink to &quot;3. Worker èƒ½è§£å†³ä»€ä¹ˆï¼šæŠŠâ€œè®¡ç®—å¯†é›†â€ä¸â€œæ¸²æŸ“æäº¤â€æ‹†å¼€&quot;">â€‹</a></h2><p>Worker æ›´æ“…é•¿è§£å†³è¿™äº›é—®é¢˜ï¼š</p><ul><li>å¤§é‡çº¯è®¡ç®—ï¼šæ’ç‰ˆé¢„å¤„ç†ã€å‡ ä½•è®¡ç®—ã€æ•°æ®è§£æã€åŠ å¯†å‹ç¼©ã€å›¾åƒå¤„ç†ï¼ˆå–å†³äº APIï¼‰</li><li>IO/è§£æï¼šæŠŠå¤§ JSON/äºŒè¿›åˆ¶è§£æä»ä¸»çº¿ç¨‹æŒªèµ°ï¼ˆå‰ææ˜¯ä¼ è¾“ä¸åŒæ­¥ç‚¹å¯æ§ï¼‰</li><li>ä»»åŠ¡åˆ‡ç‰‡ï¼šæŠŠé•¿ä»»åŠ¡æ‹†æˆæ›´å°çš„ç‰‡æ®µï¼Œé™ä½ä¸»çº¿ç¨‹è¢«é•¿æ—¶é—´å ç”¨çš„æ¦‚ç‡</li></ul><p>Worker ä¸æ“…é•¿è§£å†³è¿™äº›é—®é¢˜ï¼š</p><ul><li>DOM/CSSOM ç›¸å…³ï¼šlayout/paint çš„ç¡¬æˆæœ¬ä¸ä¼šæ¶ˆå¤±</li><li>é¢‘ç¹åŒæ­¥ï¼šæ¯å¸§å¿…é¡»ç­‰ Worker ç»“æœå†ç»§ç»­ï¼ˆç­‰å¾…æœ¬èº«å°±æ˜¯ jank çš„æ ¹ï¼‰</li></ul><h2 id="_4-offscreencanvas-è®©-worker-å‚ä¸-ç”»ç”»-çš„å°‘æ•°è·¯å¾„" tabindex="-1">4. OffscreenCanvasï¼šè®© Worker å‚ä¸â€œç”»ç”»â€çš„å°‘æ•°è·¯å¾„ <a class="header-anchor" href="#_4-offscreencanvas-è®©-worker-å‚ä¸-ç”»ç”»-çš„å°‘æ•°è·¯å¾„" aria-label="Permalink to &quot;4. OffscreenCanvasï¼šè®© Worker å‚ä¸â€œç”»ç”»â€çš„å°‘æ•°è·¯å¾„&quot;">â€‹</a></h2><p>OffscreenCanvas çš„æ ¸å¿ƒä»·å€¼æ˜¯ï¼šæŠŠæŸäº›ç»˜åˆ¶å·¥ä½œï¼ˆå°¤å…¶ canvasï¼‰æ”¾åˆ° Worker çº¿ç¨‹æ‰§è¡Œï¼Œè®©ä¸»çº¿ç¨‹ä¸å†æ‰¿æ‹…ç»˜åˆ¶ç›¸å…³çš„ JS æˆæœ¬ã€‚</p><p>ä½†å®ƒçš„ä¸Šé™é€šå¸¸è¢«ä¸‰ä»¶äº‹å†³å®šï¼š</p><ul><li>ä½ ä¼ è¾“çš„æ•°æ®é‡ä¸é¢‘ç‡ï¼ˆå¤§å›¾åƒ/å¤§é¡¶ç‚¹æ•°ç»„æ¯å¸§ä¼ è¾“ä¼šå¾ˆè´µï¼‰</li><li>ä½ æ˜¯å¦å¼•å…¥äº†æ–°çš„åŒæ­¥ç‚¹ï¼ˆä¸»çº¿ç¨‹ç­‰å¾… Worker çš„å¸§ç»“æœï¼‰</li><li>GPU/æ …æ ¼åŒ–æ˜¯å¦å·²ç»æ˜¯ç“¶é¢ˆï¼ˆæ­¤æ—¶æŒªèµ° JS æ”¶ç›Šä¼šè¿…é€Ÿå˜å°ï¼‰</li></ul>',23)),c(l,{codeBase64:"c2VxdWVuY2VEaWFncmFtCiAgcGFydGljaXBhbnQgTWFpbiBhcyBNYWluIHRocmVhZAogIHBhcnRpY2lwYW50IFdvcmtlciBhcyBXb3JrZXIKICBwYXJ0aWNpcGFudCBHUFUgYXMgR1BVL1ZpegogIE1haW4tPj5Xb3JrZXI6IHBvc3RNZXNzYWdl77yI6L6T5YWlL+eKtuaAge+8iQogIFdvcmtlci0+PldvcmtlcjogdXBkYXRlICsgZHJhd++8iE9mZnNjcmVlbkNhbnZhc++8iQogIFdvcmtlci0tPj5HUFU6IHN1Ym1pdO+8iOWunueOsOi3r+W+hOmaj+W5s+WPsC/phY3nva7lj5jljJbvvIkKICBHUFUtLT4+TWFpbjogcHJlc2VudO+8iOacgOe7iOS4iuWxj++8iQo="}),e[3]||(e[3]=o('<h2 id="_5-ä¸€ä¸ªå®ç”¨çš„åˆ¤æ–­é¢˜-ä½ æ˜¯åœ¨-æŒªèµ°è®¡ç®—-è¿˜æ˜¯åœ¨-å¼•å…¥é€šä¿¡ç¨" tabindex="-1">5. ä¸€ä¸ªå®ç”¨çš„åˆ¤æ–­é¢˜ï¼šä½ æ˜¯åœ¨â€œæŒªèµ°è®¡ç®—â€ï¼Œè¿˜æ˜¯åœ¨â€œå¼•å…¥é€šä¿¡ç¨â€ <a class="header-anchor" href="#_5-ä¸€ä¸ªå®ç”¨çš„åˆ¤æ–­é¢˜-ä½ æ˜¯åœ¨-æŒªèµ°è®¡ç®—-è¿˜æ˜¯åœ¨-å¼•å…¥é€šä¿¡ç¨" aria-label="Permalink to &quot;5. ä¸€ä¸ªå®ç”¨çš„åˆ¤æ–­é¢˜ï¼šä½ æ˜¯åœ¨â€œæŒªèµ°è®¡ç®—â€ï¼Œè¿˜æ˜¯åœ¨â€œå¼•å…¥é€šä¿¡ç¨â€&quot;">â€‹</a></h2><p>æˆ‘æ›´æ„¿æ„æŠŠ Worker ä¼˜åŒ–å½“æˆä¸€ä¸ªç®€å•çš„ç®—è´¦é¢˜ï¼š</p><ul><li>çœä¸‹æ¥çš„ï¼šä¸»çº¿ç¨‹è®¡ç®—æ—¶é—´</li><li>æ–°å¢çš„ï¼šæ¶ˆæ¯ä¼ é€’/åºåˆ—åŒ–/æ‹·è´/åŒæ­¥ç­‰å¾…</li></ul><p>å½“æ–°å¢çš„é€šä¿¡ç¨è¶…è¿‡çœä¸‹æ¥çš„è®¡ç®—ï¼ŒWorker å°±ä¼šä»ä¼˜åŒ–å˜æˆé€€åŒ–ã€‚</p><h2 id="å‚è€ƒ" tabindex="-1">å‚è€ƒ <a class="header-anchor" href="#å‚è€ƒ" aria-label="Permalink to &quot;å‚è€ƒ&quot;">â€‹</a></h2><ul><li>MDNï¼šWeb Workers <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API" target="_blank" rel="noreferrer">https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API</a></li><li>MDNï¼šOffscreenCanvas <a href="https://developer.mozilla.org/en-US/docs/Web/API/OffscreenCanvas" target="_blank" rel="noreferrer">https://developer.mozilla.org/en-US/docs/Web/API/OffscreenCanvas</a></li></ul>',6))])}const m=s(d,[["render",f]]);export{b as __pageData,m as default};
