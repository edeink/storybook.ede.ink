<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>图片发展史与图片的秘密：格式、解码、色彩空间与编辑器性能 | 2026</title>
    <meta name="description" content="Book preview from source/_posts/2026">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/assets/style.6EKIstcX.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.DxZT3bcH.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.C2eRlmqf.js">
    <link rel="modulepreload" href="/assets/chunks/theme.CwYM5-N0.js">
    <link rel="modulepreload" href="/assets/chunks/katex.Cu_Erd72.js">
    <link rel="modulepreload" href="/assets/chunks/dagre-6UL2VRFP.CfVVvIS6.js">
    <link rel="modulepreload" href="/assets/chunks/cose-bilkent-S5V4N54A.BmlufHRu.js">
    <link rel="modulepreload" href="/assets/chunks/c4Diagram-YG6GDRKO.mswdMTSV.js">
    <link rel="modulepreload" href="/assets/chunks/flowDiagram-NV44I4VS.Dey16uW3.js">
    <link rel="modulepreload" href="/assets/chunks/erDiagram-Q2GNP2WA.DYOlISM_.js">
    <link rel="modulepreload" href="/assets/chunks/gitGraphDiagram-NY62KEGX.BOqfY7L3.js">
    <link rel="modulepreload" href="/assets/chunks/ganttDiagram-JELNMOA3.BIcQvOQG.js">
    <link rel="modulepreload" href="/assets/chunks/infoDiagram-WHAUD3N6.CC3ymlyr.js">
    <link rel="modulepreload" href="/assets/chunks/pieDiagram-ADFJNKIX.ByBBfhK7.js">
    <link rel="modulepreload" href="/assets/chunks/quadrantDiagram-AYHSOK5B.pI3k0Ogt.js">
    <link rel="modulepreload" href="/assets/chunks/xychartDiagram-PRI3JC2R.DSQFxzaG.js">
    <link rel="modulepreload" href="/assets/chunks/requirementDiagram-UZGBJVZJ.Zm7sTO3k.js">
    <link rel="modulepreload" href="/assets/chunks/sequenceDiagram-WL72ISMW.BA9qgtXL.js">
    <link rel="modulepreload" href="/assets/chunks/classDiagram-2ON5EDUG.CsJ2Lkki.js">
    <link rel="modulepreload" href="/assets/chunks/classDiagram-v2-WZHVMYZB.CsJ2Lkki.js">
    <link rel="modulepreload" href="/assets/chunks/stateDiagram-FKZM4ZOC.CrFruCWq.js">
    <link rel="modulepreload" href="/assets/chunks/stateDiagram-v2-4FDKWEC3.CYvjQwFD.js">
    <link rel="modulepreload" href="/assets/chunks/journeyDiagram-XKPGCS4Q.wh5gBCz2.js">
    <link rel="modulepreload" href="/assets/chunks/timeline-definition-IT6M3QCI.lFpzQuPK.js">
    <link rel="modulepreload" href="/assets/chunks/mindmap-definition-VGOIOE7T.-SYH2ZCI.js">
    <link rel="modulepreload" href="/assets/chunks/kanban-definition-3W4ZIXB7.Bro0d3cr.js">
    <link rel="modulepreload" href="/assets/chunks/sankeyDiagram-TZEHDZUN.DTPAXrYG.js">
    <link rel="modulepreload" href="/assets/chunks/diagram-S2PKOQOG.DGhCvmCZ.js">
    <link rel="modulepreload" href="/assets/chunks/diagram-QEK2KX5R.COK47-js.js">
    <link rel="modulepreload" href="/assets/chunks/blockDiagram-VD42YOAC.D4X0x2ys.js">
    <link rel="modulepreload" href="/assets/chunks/architectureDiagram-VXUJARFQ.BaUhjNtU.js">
    <link rel="modulepreload" href="/assets/chunks/diagram-PSM6KHXK.DkcuS-vd.js">
    <link rel="modulepreload" href="/assets/chunks/virtual_mermaid-config.DDnGl6nM.js">
    <link rel="modulepreload" href="/assets/web-editor_08-images-history-and-secrets.md.DPcy_uLE.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-7e31dfad><!--[--><!--]--><!--[--><span tabindex="-1" data-v-39971c1e></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-39971c1e>Skip to content</a><!--]--><!----><header class="VPNav" data-v-7e31dfad data-v-777e29d8><div class="VPNavBar" data-v-777e29d8 data-v-28354aa7><div class="wrapper" data-v-28354aa7><div class="container" data-v-28354aa7><div class="title" data-v-28354aa7><div class="VPNavBarTitle has-sidebar" data-v-28354aa7 data-v-7aef3d92><a class="title" href="/" data-v-7aef3d92><!--[--><!--]--><!----><span data-v-7aef3d92>2026</span><!--[--><!--]--></a></div></div><div class="content" data-v-28354aa7><div class="content-body" data-v-28354aa7><!--[--><!--]--><div class="VPNavBarSearch search" data-v-28354aa7><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><!----><!----><div class="VPNavBarAppearance appearance" data-v-28354aa7 data-v-ac871bc4><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-ac871bc4 data-v-f556f0c8 data-v-0f2dd873><span class="check" data-v-0f2dd873><span class="icon" data-v-0f2dd873><!--[--><span class="vpi-sun sun" data-v-f556f0c8></span><span class="vpi-moon moon" data-v-f556f0c8></span><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-28354aa7 data-v-554c9a17 data-v-195e553c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-195e553c><span class="vpi-more-horizontal icon" data-v-195e553c></span></button><div class="menu" data-v-195e553c><div class="VPMenu" data-v-195e553c data-v-d91ff435><!----><!--[--><!--[--><!----><div class="group" data-v-554c9a17><div class="item appearance" data-v-554c9a17><p class="label" data-v-554c9a17>Appearance</p><div class="appearance-action" data-v-554c9a17><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-554c9a17 data-v-f556f0c8 data-v-0f2dd873><span class="check" data-v-0f2dd873><span class="icon" data-v-0f2dd873><!--[--><span class="vpi-sun sun" data-v-f556f0c8></span><span class="vpi-moon moon" data-v-f556f0c8></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-28354aa7 data-v-c95a1bd1><span class="container" data-v-c95a1bd1><span class="top" data-v-c95a1bd1></span><span class="middle" data-v-c95a1bd1></span><span class="bottom" data-v-c95a1bd1></span></span></button></div></div></div></div><div class="divider" data-v-28354aa7><div class="divider-line" data-v-28354aa7></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-7e31dfad data-v-d1d97dc0><div class="container" data-v-d1d97dc0><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-d1d97dc0><span class="vpi-align-left menu-icon" data-v-d1d97dc0></span><span class="menu-text" data-v-d1d97dc0>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-d1d97dc0 data-v-4833277d><button data-v-4833277d>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-7e31dfad data-v-3fd06dd3><div class="curtain" data-v-3fd06dd3></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-3fd06dd3><span class="visually-hidden" id="sidebar-aria-label" data-v-3fd06dd3> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-efbd6156><section class="VPSidebarItem level-0 collapsible has-active" data-v-efbd6156 data-v-46688d19><div class="item" role="button" tabindex="0" data-v-46688d19><div class="indicator" data-v-46688d19></div><h2 class="text" data-v-46688d19>目录</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46688d19><span class="vpi-chevron-right caret-icon" data-v-46688d19></span></div></div><div class="items" data-v-46688d19><!--[--><div class="VPSidebarItem level-1 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/" data-v-46688d19><!--[--><p class="text" data-v-46688d19>引序</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible collapsed has-active" data-v-46688d19 data-v-46688d19><div class="item" role="button" tabindex="0" data-v-46688d19><div class="indicator" data-v-46688d19></div><h3 class="text" data-v-46688d19>Web 编辑器与协同</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46688d19><span class="vpi-chevron-right caret-icon" data-v-46688d19></span></div></div><div class="items" data-v-46688d19><!--[--><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/web-editor/01-editor-architecture" data-v-46688d19><!--[--><p class="text" data-v-46688d19>Web 编辑器：核心架构与“轮点”演进</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/web-editor/02-collaboration-crdt-ot" data-v-46688d19><!--[--><p class="text" data-v-46688d19>协同编辑：CRDT vs OT 的工程取舍（以及富文本的坑）</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/web-editor/03-plugin-system" data-v-46688d19><!--[--><p class="text" data-v-46688d19>Web 编辑器插件体系：可扩展、可治理、可兜底</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/web-editor/04-doc-storage-and-indexes" data-v-46688d19><!--[--><p class="text" data-v-46688d19>Web 编辑器的数据怎么存：Rope、Piece Table、区间树与红黑树</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/web-editor/05-versioning-and-incremental-sync" data-v-46688d19><!--[--><p class="text" data-v-46688d19>Web 编辑器如何增量提交与版本管理：op log、快照与可回放系统</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/web-editor/06-open-source-editors-comparison" data-v-46688d19><!--[--><p class="text" data-v-46688d19>开源 Web 富文本横向对比：tiptap / ProseMirror / Slate / Lexical / Quill</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/web-editor/07-fonts-history-and-secrets" data-v-46688d19><!--[--><p class="text" data-v-46688d19>字体发展史与字体的秘密：从 OpenType 到编辑器排版管线</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/web-editor/08-images-history-and-secrets" data-v-46688d19><!--[--><p class="text" data-v-46688d19>图片发展史与图片的秘密：格式、解码、色彩空间与编辑器性能</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/web-editor/09-layout-algorithms-constraint" data-v-46688d19><!--[--><p class="text" data-v-46688d19>约束布局与排版算法：编辑器如何把“文档”排成“可交互的版面”</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/web-editor/10-unicode-linebreak-bidi-grapheme" data-v-46688d19><!--[--><p class="text" data-v-46688d19>Unicode 行内排版三件套：Line Break / Bidi / Grapheme Break</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/web-editor/11-hit-testing-and-event-system" data-v-46688d19><!--[--><p class="text" data-v-46688d19>点击测试（Hit Testing）与事件系统：从坐标到交互闭环</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/web-editor/12-rendering-graphics-details" data-v-46688d19><!--[--><p class="text" data-v-46688d19>渲染图形学细节：矩阵、Shader、CPU/GPU 与瓦片化（Tiling）</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-46688d19 data-v-46688d19><div class="item" role="button" tabindex="0" data-v-46688d19><div class="indicator" data-v-46688d19></div><h3 class="text" data-v-46688d19>浏览器底层与图形渲染</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46688d19><span class="vpi-chevron-right caret-icon" data-v-46688d19></span></div></div><div class="items" data-v-46688d19><!--[--><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/browser-rendering/01-chromium-architecture-processes-and-threads" data-v-46688d19><!--[--><p class="text" data-v-46688d19>Chromium 架构总览：多进程与线程模型</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/browser-rendering/02-blink-lifecycle-style-layout-paint" data-v-46688d19><!--[--><p class="text" data-v-46688d19>Blink 生命周期：style/layout/paint 与无效化</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/browser-rendering/03-cc-compositor-commit-activate-draw" data-v-46688d19><!--[--><p class="text" data-v-46688d19>cc 合成体系：两棵树、属性树与同步点</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/browser-rendering/04-viz-gpu-and-present-to-screen" data-v-46688d19><!--[--><p class="text" data-v-46688d19>Viz/GPU/上屏：surface、buffer 与显示路径</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/browser-rendering/05-input-latency-scroll-and-hit-test" data-v-46688d19><!--[--><p class="text" data-v-46688d19>输入与滚动：事件路由、命中与延迟下限</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/browser-rendering/06-v8-for-frontend-hiddenclass-ic-gc" data-v-46688d19><!--[--><p class="text" data-v-46688d19>V8 细节（前端视角）：优化、deopt 与 GC</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/browser-rendering/07-workers-offscreen-canvas-and-transfer-cost" data-v-46688d19><!--[--><p class="text" data-v-46688d19>Worker：收益边界、OffscreenCanvas 与通信成本</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/browser-rendering/08-performance-tracing-devtools-perfetto" data-v-46688d19><!--[--><p class="text" data-v-46688d19>可观测：DevTools、Tracing/Perfetto 与归因方法</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/browser-rendering/09-frontend-levers-css-composite-paint-budget" data-v-46688d19><!--[--><p class="text" data-v-46688d19>前端对照表：哪些写法对应哪条渲染管线</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-46688d19 data-v-46688d19><div class="item" role="button" tabindex="0" data-v-46688d19><div class="indicator" data-v-46688d19></div><h3 class="text" data-v-46688d19>AI 碎碎念</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46688d19><span class="vpi-chevron-right caret-icon" data-v-46688d19></span></div></div><div class="items" data-v-46688d19><!--[--><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/ai-chitchat/01-ml-dl-basics-for-engineers" data-v-46688d19><!--[--><p class="text" data-v-46688d19>AI 碎碎念 01：机器学习与深度学习的浅尝即止（工程师够用版）</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/ai-chitchat/02-diffusion-models-primer" data-v-46688d19><!--[--><p class="text" data-v-46688d19>AI 碎碎念 02：扩散模型从 DDPM 到 DiT（用类比讲清楚加噪与去噪）</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/ai-chitchat/03-ecommerce-diffusion-practice" data-v-46688d19><!--[--><p class="text" data-v-46688d19>AI 碎碎念 03：电商里的扩散模型折腾记（Mask、Inpaint、Outpaint 到虚拟试衣）</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/ai-chitchat/04-llm-primer-for-engineers" data-v-46688d19><!--[--><p class="text" data-v-46688d19>AI 碎碎念 04：LLM 够用版原理（Transformer、上下文与概率）</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/ai-chitchat/05-ecommerce-llm-agent-practice" data-v-46688d19><!--[--><p class="text" data-v-46688d19>AI 碎碎念 05：电商里的 LLM 落地（Agent、Prompt 与 A2UI）</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/ai-chitchat/06-ai-positioning-and-engineering-playbook" data-v-46688d19><!--[--><p class="text" data-v-46688d19>AI 碎碎念 06：我的定位与工程人的做法（不神化，不自卑）</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/ai-chitchat/07-vibecoding-three-horses-faster" data-v-46688d19><!--[--><p class="text" data-v-46688d19>AI 碎碎念 07：从 Vibe Coding 到 Spec-Driven Dev：四个轮子复刻 Faster</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-46688d19 data-v-46688d19><div class="item" role="button" tabindex="0" data-v-46688d19><div class="indicator" data-v-46688d19></div><h3 class="text" data-v-46688d19>工作的碎碎念</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-46688d19><span class="vpi-chevron-right caret-icon" data-v-46688d19></span></div></div><div class="items" data-v-46688d19><!--[--><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/ten-years/2025-core-plus-plugins" data-v-46688d19><!--[--><p class="text" data-v-46688d19>为什么重交互产品都长成 Core + Plugins</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/ten-years/2025-release-patterns" data-v-46688d19><!--[--><p class="text" data-v-46688d19>四种发版节奏对比</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-46688d19 data-v-46688d19><div class="item" data-v-46688d19><div class="indicator" data-v-46688d19></div><a class="VPLink link link" href="/ten-years/2025" data-v-46688d19><!--[--><p class="text" data-v-46688d19>2025：十年再回首我的工作经历</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-7e31dfad data-v-cfc5462b><div class="VPDoc has-sidebar has-aside" data-v-cfc5462b data-v-55d9feae><!--[--><!--]--><div class="container" data-v-55d9feae><div class="aside" data-v-55d9feae><div class="aside-curtain" data-v-55d9feae></div><div class="aside-container" data-v-55d9feae><div class="aside-content" data-v-55d9feae><div class="VPDocAside" data-v-55d9feae data-v-af649e6a><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-af649e6a data-v-bc4063f9><div class="content" data-v-bc4063f9><div class="outline-marker" data-v-bc4063f9></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-bc4063f9>On this page</div><ul class="VPDocOutlineItem root" data-v-bc4063f9 data-v-9f82df79><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-af649e6a></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-55d9feae><div class="content-container" data-v-55d9feae><!--[--><!--]--><main class="main" data-v-55d9feae><div style="position:relative;" class="vp-doc _web-editor_08-images-history-and-secrets" data-v-55d9feae><div><div class="alert read-stats" role="note"><span class="read-stats__icon" aria-hidden="true">🔖</span><span class="read-stats__text">本文约 <b>3499</b> 字，阅读预计耗时 <b>9</b> 分钟。</span></div><div class="alert ai-disclosure" role="note"><span class="ai-disclosure__icon" aria-hidden="true">ⓘ</span><span class="ai-disclosure__text">AI 辅助写作声明：本文由博主构思逻辑，AI 辅助润色，双方共同校对。</span></div><p>图片是编辑器里最“看起来简单，实际上很贵”的东西：解码卡顿、内存暴涨、色彩不一致、导出失真，以及你根本没想到的 EXIF 方向。</p><h2 id="问题-为什么编辑器里插入图片-会成为性能与质量的分水岭" tabindex="-1">问题：为什么编辑器里插入图片，会成为性能与质量的分水岭？ <a class="header-anchor" href="#问题-为什么编辑器里插入图片-会成为性能与质量的分水岭" aria-label="Permalink to &quot;问题：为什么编辑器里插入图片，会成为性能与质量的分水岭？&quot;">​</a></h2><p>因为图片的成本主要在三件事：</p><ol><li>体积：网络下载与缓存</li><li>解码：CPU（或硬件）解码耗时</li><li>内存：解码后是像素（RGBA），体积按分辨率爆炸</li></ol><p>举个很“反直觉”的例子：一张 1MB 的 JPEG，解码后可能变成几十 MB 的像素数据。编辑器里你再叠几个滤镜、缩放几次、做个导出，内存和带宽都能被你玩坏。</p><h2 id="分析-图片格式的-轮点-与取舍" tabindex="-1">分析：图片格式的“轮点”与取舍 <a class="header-anchor" href="#分析-图片格式的-轮点-与取舍" aria-label="Permalink to &quot;分析：图片格式的“轮点”与取舍&quot;">​</a></h2><ul><li>JPEG：有损压缩，适合照片；锐利边缘/文字会糊</li><li>PNG：无损 + alpha；适合 UI、图标；体积可能大</li><li>WebP：更现代的压缩，兼顾有损/无损；兼容性更好</li><li>AVIF：压缩率更强，但编码/解码成本更高（设备差异大）</li></ul><h3 id="图片管线图-源文件-assets-diagrams-image-pipeline-mmd" tabindex="-1">图片管线图（源文件：<code>../assets/diagrams/image-pipeline.mmd</code>） <a class="header-anchor" href="#图片管线图-源文件-assets-diagrams-image-pipeline-mmd" aria-label="Permalink to &quot;图片管线图（源文件：`../assets/diagrams/image-pipeline.mmd`）&quot;">​</a></h3><div class="mermaid"></div><p>这张图里有一个常被忽略的事实：编辑器不是“展示一张图”，而是“持续操作一张图”。</p><p>展示阶段你可能只需要一次 decode + 一次 upload；但编辑器里你还会做：</p><ul><li>缩放与裁剪：需要不同分辨率的重采样</li><li>滤镜与标注：需要额外的中间缓冲</li><li>导出与协同：需要在不同端保持一致的结果</li></ul><p>因此图片系统更像一个“小型渲染引擎”，而不是一个 <code>&lt;img&gt;</code> 标签的包装。</p><h2 id="横向对比-格式选择-工程维度" tabindex="-1">横向对比：格式选择（工程维度） <a class="header-anchor" href="#横向对比-格式选择-工程维度" aria-label="Permalink to &quot;横向对比：格式选择（工程维度）&quot;">​</a></h2><table tabindex="0"><thead><tr><th>格式</th><th>优势</th><th>劣势</th><th>编辑器常见用途</th></tr></thead><tbody><tr><td>JPEG</td><td>照片体积小</td><td>无 alpha；文字边缘糊</td><td>图片素材、截图</td></tr><tr><td>PNG</td><td>无损 + alpha</td><td>体积大</td><td>UI、贴纸、透明背景</td></tr><tr><td>WebP</td><td>平衡、生态成熟</td><td>部分边缘场景需验证</td><td>Web 主流默认</td></tr><tr><td>AVIF</td><td>压缩率极强</td><td>解码成本/兼容差异</td><td>需要极致体积时</td></tr></tbody></table><p>四舍五入：编辑器要的不是“最强压缩”，而是“用户机器上最稳定的体验”。很多时候 WebP 是甜点。</p><h2 id="图片的秘密-1-解码后才是真正的成本-像素内存" tabindex="-1">图片的秘密 1：解码后才是真正的成本（像素内存） <a class="header-anchor" href="#图片的秘密-1-解码后才是真正的成本-像素内存" aria-label="Permalink to &quot;图片的秘密 1：解码后才是真正的成本（像素内存）&quot;">​</a></h2><p>图片文件大小（1MB、2MB）只是“运输费用”，真正的“仓储费用”是解码后的像素缓冲。</p><p>对绝大多数编辑器渲染路径来说，一张位图最终会落到 RGBA 像素（每像素 4 字节）：</p><ul><li>decodedBytes = width × height × 4</li></ul><p>你把这句话在脑子里背熟，很多性能问题会立刻变得不神秘：</p><table tabindex="0"><thead><tr><th>分辨率</th><th>像素数量</th><th>解码后内存（约）</th></tr></thead><tbody><tr><td>1920×1080</td><td>2.07M</td><td>8.3MB</td></tr><tr><td>4000×3000</td><td>12.0M</td><td>48MB</td></tr><tr><td>8000×8000</td><td>64.0M</td><td>256MB</td></tr></tbody></table><p>这还没算：</p><ul><li>多份副本：解码缓冲 + Canvas backing store + GPU 纹理 + 导出临时缓冲</li><li>多尺寸：缩略图/预览图/裁剪图</li></ul><p>所以图片在编辑器里像“行李箱”：你以为只有箱子重量，实际上搬上楼还要考虑楼梯、门宽、以及你有没有电梯（硬件解码/上传能力）。</p><h2 id="图片的秘密-2-exif-方向与色彩空间会让-看起来不一致" tabindex="-1">图片的秘密 2：EXIF 方向与色彩空间会让“看起来不一致” <a class="header-anchor" href="#图片的秘密-2-exif-方向与色彩空间会让-看起来不一致" aria-label="Permalink to &quot;图片的秘密 2：EXIF 方向与色彩空间会让“看起来不一致”&quot;">​</a></h2><p>编辑器的现实后果：</p><ul><li>同一张图在不同环境显示方向不同（手机拍的图最常见）</li><li>同一张图在 Canvas/WebGL 导出后颜色变了（色彩管理差异）</li></ul><p>方向问题通常来自 EXIF Orientation：文件里写着“请旋转 90° 再展示”，但不同环境处理方式不一致。</p><p>色彩问题更阴险：同一张图在不同渲染后端、不同导出路径里，可能走了不同的色彩管理（sRGB / Display P3 / ICC profile），导致“看起来发灰/偏黄”。这类问题在：</p><ul><li>HTML<img> 显示正常，但 Canvas 导出颜色不一致</li><li>WebGL 纹理采样与颜色空间处理不一致</li></ul><p>工程上建议把它当成“输入数据清洗”：</p><ul><li>导入阶段就做方向归一化（把旋转 baked 到像素里，或把 transform 写进模型）</li><li>明确色彩空间策略（至少默认 sRGB，必要时保留 profile 并在导出时一致处理）</li></ul><h2 id="图片的秘密-3-编辑器里-图片-不是一张图-而是一个对象模型" tabindex="-1">图片的秘密 3：编辑器里“图片”不是一张图，而是一个对象模型 <a class="header-anchor" href="#图片的秘密-3-编辑器里-图片-不是一张图-而是一个对象模型" aria-label="Permalink to &quot;图片的秘密 3：编辑器里“图片”不是一张图，而是一个对象模型&quot;">​</a></h2><p>你需要至少这些字段：</p><ul><li>source：原始 url / blob / assetId</li><li>intrinsic size：原始宽高</li><li>display size：布局宽高（可拉伸、可裁剪）</li><li>transform：旋转、缩放、裁剪矩形</li><li>loading state：占位、错误、重试策略</li></ul><p>这类对象模型看起来“啰嗦”，但它能帮你把边界条件写死：</p><table tabindex="0"><thead><tr><th>字段</th><th>语义</th><th>常见边界条件</th></tr></thead><tbody><tr><td>source</td><td>原始资源定位</td><td>url 过期、blob 丢失、assetId 无权限</td></tr><tr><td>intrinsicSize(w,h)</td><td>原始尺寸</td><td>读不到 metadata、超大图限制</td></tr><tr><td>displaySize(w,h)</td><td>布局尺寸</td><td>与容器约束冲突、响应式缩放</td></tr><tr><td>crop(x,y,w,h)</td><td>裁剪框（像素坐标或归一化坐标）</td><td>不能越界：0≤x≤W，0≤y≤H，0≤w≤W-x，0≤h≤H-y</td></tr><tr><td>rotation</td><td>旋转角度/矩阵</td><td>方向归一化与导出一致性</td></tr><tr><td>loadingState</td><td>占位/成功/失败</td><td>重试策略、防抖、断网切换</td></tr></tbody></table><h3 id="图片加载状态机-把-失败-设计成一等公民" tabindex="-1">图片加载状态机：把“失败”设计成一等公民 <a class="header-anchor" href="#图片加载状态机-把-失败-设计成一等公民" aria-label="Permalink to &quot;图片加载状态机：把“失败”设计成一等公民&quot;">​</a></h3><div class="mermaid"></div><h2 id="工程实践-插图的性能优化与异常处理" tabindex="-1">工程实践：插图的性能优化与异常处理 <a class="header-anchor" href="#工程实践-插图的性能优化与异常处理" aria-label="Permalink to &quot;工程实践：插图的性能优化与异常处理&quot;">​</a></h2><h3 id="性能策略" tabindex="-1">性能策略 <a class="header-anchor" href="#性能策略" aria-label="Permalink to &quot;性能策略&quot;">​</a></h3><ul><li>缩略图优先：先展示低清（或 server thumbnail），再渐进替换高清</li><li>解码分离：用 <code>createImageBitmap</code> 或 worker 解码（视浏览器支持）</li><li>纹理预算：限制同时在 GPU 的大图数量（LRU）、视口外卸载</li></ul><p>再补一个“很像缓存系统”的隐喻：GPU 纹理就像 CPU 的 L3 cache，容量小但很快。你把所有大图都上传到 GPU，就像把所有数据都塞进缓存：迟早爆。</p><p>可以把纹理预算写成一个简单规则：</p><ul><li>每张纹理成本约等于 decodedBytes（甚至更大，视对齐与 mipmap）</li><li>总纹理成本必须小于一个阈值 Budget（例如 128MB/256MB，按设备分级）</li><li>超预算时：按 LRU 或视口距离回收纹理</li></ul><div class="mermaid"></div><h3 id="异常策略" tabindex="-1">异常策略 <a class="header-anchor" href="#异常策略" aria-label="Permalink to &quot;异常策略&quot;">​</a></h3><ul><li>下载失败：重试 + 降级（展示占位与“点击重试”）</li><li>解码失败：记录格式/UA，必要时服务端转码兜底</li><li>大图风险：限制最大边长，或导入时提示压缩</li></ul><h2 id="安全与合规-图片不是纯数据-可能是-带脚本的容器" tabindex="-1">安全与合规：图片不是纯数据，可能是“带脚本的容器” <a class="header-anchor" href="#安全与合规-图片不是纯数据-可能是-带脚本的容器" aria-label="Permalink to &quot;安全与合规：图片不是纯数据，可能是“带脚本的容器”&quot;">​</a></h2><p>很多团队会把图片当成“二进制文件，没什么安全风险”。但在编辑器这种“用户可上传、可外链、可导出”的场景里，图片相关的安全与合规问题非常现实：</p><ul><li>SVG：它是 XML，可能包含脚本、外链资源与事件处理</li><li>外链图片：可能被追踪（像素追踪）、可能失效（404）、可能返回异常内容类型</li><li>EXIF：可能携带地理位置、拍摄信息（隐私风险）</li></ul><p>比较稳的工程策略是“导入即清洗”：</p><ul><li>统一把外部图片转为受控 assetId（避免导出时外链失效与追踪）</li><li>对 SVG 做严格白名单（或直接转 raster）</li><li>对 EXIF 做脱敏（保留必要信息，去除敏感字段）</li></ul><p>四舍五入：图片系统的底线不是“能显示”，而是“可控、可追溯、可导出”。</p><h2 id="导出视角-编辑器的图片最终要去哪" tabindex="-1">导出视角：编辑器的图片最终要去哪？ <a class="header-anchor" href="#导出视角-编辑器的图片最终要去哪" aria-label="Permalink to &quot;导出视角：编辑器的图片最终要去哪？&quot;">​</a></h2><p>图片在编辑器里往往有三种终点：</p><ol><li>Web 页面（HTML）：尽量复用浏览器能力，成本低，但跨端一致性不强</li><li>Canvas/PDF 导出：你要自己处理色彩、缩放、抗锯齿、裁剪，成本高但可控</li><li>协同与历史：需要能回放“图片的变换”（裁剪框、旋转、标注），而不是只存一张最终位图</li></ol><p>这里最容易踩的坑是“把变换 bake 到像素里”：</p><ul><li>好处：显示简单</li><li>坏处：每次裁剪/旋转都要重采样，画质与性能都会被消耗</li></ul><p>更稳的折中是：模型里保存参数化变换（crop/rotate/scale），渲染时应用；只有在导出或需要固化时才进行最终的像素重采样。</p><h2 id="细节-色彩管理与-看起来不一样-的锅" tabindex="-1">细节：色彩管理与“看起来不一样”的锅 <a class="header-anchor" href="#细节-色彩管理与-看起来不一样-的锅" aria-label="Permalink to &quot;细节：色彩管理与“看起来不一样”的锅&quot;">​</a></h2><p>图片系统里有一类非常难排的线上问题：同一张图，在不同浏览器/不同屏幕/不同导出链路里颜色不一样。用户通常会用一句话概括：发灰、发黄、偏红。你如果只盯着解码与缩放，很容易被带偏。</p><p>背后的关键点是：图片不仅是像素矩阵，还可能带颜色配置（例如 ICC profile）。而渲染链路也会做颜色空间转换与合成：</p><ul><li>解码得到的像素可能在 sRGB、Display-P3 或其他色彩空间</li><li>Canvas/WebGL/PDF 的目标色彩空间不一定一致</li><li>叠加透明度（alpha blending）会把“底色”也纳入最终视觉结果</li></ul><p>工程上更稳的策略是把“颜色”当成模型的一部分来处理：至少在导出链路里固定目标色彩空间，并在日志里记录关键图片的颜色信息（是否携带 ICC、目标色彩空间、是否发生转换）。这样当用户说“导出偏色”时，你能回答的是“在哪个环节发生了颜色转换”，而不是“我这边看着挺正常”。</p><h2 id="渲染性能-图片的成本不是-画出来-而是-让它们一直可交互" tabindex="-1">渲染性能：图片的成本不是“画出来”，而是“让它们一直可交互” <a class="header-anchor" href="#渲染性能-图片的成本不是-画出来-而是-让它们一直可交互" aria-label="Permalink to &quot;渲染性能：图片的成本不是“画出来”，而是“让它们一直可交互”&quot;">​</a></h2><p>很多图片性能问题在 demo 阶段看不出来，是因为 demo 里图片少、视口小、用户操作也少。线上真实场景往往更像这样：</p><ul><li>文档里有几十张图，用户快速滚动</li><li>同一张图会被频繁缩放（拖拽角点）、裁剪、旋转</li><li>图片上还有标注、贴纸、选中框、拖拽手柄</li></ul><p>这意味着你不只是解码一次、绘制一次，而是要让图片在“持续交互”中保持稳定帧率。更稳的工程拆法是把图像系统分成三层缓存：</p><ul><li><strong>源数据缓存</strong>：原始文件/网络响应（避免重复下载）</li><li><strong>解码缓存</strong>：解码后的像素或 ImageBitmap（避免重复解码）</li><li><strong>渲染缓存</strong>：适配当前缩放级别的纹理/位图（避免每帧重复重采样）</li></ul><p>关键点在于第三层：用户缩放到 300% 时，你不应该把一张 3000px 的原图每帧都重采样；更合理的是按缩放级别生成合适分辨率的渲染缓存，并在缩放停止后再补更清晰的版本（渐进式清晰）。这和地图瓦片很像：交互时先保证流畅，停下来再追求锐利。</p><h2 id="方向与旋转-exif-只是开始-关键是-模型怎么表达" tabindex="-1">方向与旋转：EXIF 只是开始，关键是“模型怎么表达” <a class="header-anchor" href="#方向与旋转-exif-只是开始-关键是-模型怎么表达" aria-label="Permalink to &quot;方向与旋转：EXIF 只是开始，关键是“模型怎么表达”&quot;">​</a></h2><p>图片方向问题最经典的表现是：用户手机拍的图，在某些浏览器里横着、在某些导出里竖着。EXIF orientation 是第一层坑，但更深的坑在于你模型层如何表达旋转与裁剪：</p><ul><li>如果你把 orientation 在导入时直接 bake 到像素：显示简单，但后续裁剪/旋转会反复重采样</li><li>如果你把 orientation 当成模型属性：渲染时做变换，导出时再固化，性能与质量更可控</li></ul><p>更稳的工程做法通常是把图片的变换拆成“参数化管线”，并保证顺序可解释：先做方向修正，再做裁剪，再做旋转缩放，再叠加标注。这样协同与历史系统也能回放这条管线，而不是只能回放一张最终位图。</p><h2 id="图片上的标注-位图只是底板-真正难的是-向量叠加的坐标系" tabindex="-1">图片上的标注：位图只是底板，真正难的是“向量叠加的坐标系” <a class="header-anchor" href="#图片上的标注-位图只是底板-真正难的是-向量叠加的坐标系" aria-label="Permalink to &quot;图片上的标注：位图只是底板，真正难的是“向量叠加的坐标系”&quot;">​</a></h2><p>一旦你的图片支持标注（画笔、箭头、文本框、马赛克），你就很难再把图片当成“静态资源”来处理，因为用户的每一次拖拽与缩放都需要同时作用于两层：</p><ul><li>底图：图片像素（可能有自己的分辨率与缩放级别）</li><li>叠加层：向量图元（线段、路径、文本），需要在不同缩放下保持清晰</li></ul><p>更稳的模型是把标注存为向量，并绑定到图片的局部坐标系（例如以图片左上角为原点的归一化坐标）。当图片在页面里发生变换时，你只需要把同一个变换矩阵应用到底图与叠加层上，就能保持相对位置一致。</p><p>写成一个非常朴素的形式就是：屏幕点 p_screen 经过逆变换回到图片局部坐标 p_local，编辑操作在局部坐标里产生，渲染再通过变换矩阵把 p_local 投影回屏幕。你不需要一上来就做很完整的矩阵系统，但你必须在模型上明确“标注跟着谁走”，否则标注系统会在缩放/旋转/裁剪组合下迅速失控。</p><h2 id="内存与回收-图片系统的敌人是-看不见的峰值" tabindex="-1">内存与回收：图片系统的敌人是“看不见的峰值” <a class="header-anchor" href="#内存与回收-图片系统的敌人是-看不见的峰值" aria-label="Permalink to &quot;内存与回收：图片系统的敌人是“看不见的峰值”&quot;">​</a></h2><p>图片相关的线上事故，除了卡顿，还有一种更难排的：页面突然崩掉或白屏，移动端尤其常见。它往往不是平均内存太高，而是某次操作触发了峰值：例如用户快速滚动，连续解码了多张大图；或者同一张图在多个缩放级别下生成了多份渲染缓存。</p><p>更稳的工程策略是把“可用性”当成第一目标：你宁愿短暂模糊，也不要崩溃。常见手段包括：</p><ul><li>限制并发解码数量，滚动时优先保证视口内最近的图片</li><li>对渲染缓存设全局预算，并按 LRU/距离回收（前面已经提到）</li><li>在内存压力信号出现时快速降级：暂停生成更高清缓存，优先保留当前视口</li></ul><p>四舍五入：图片系统要像浏览器一样做“资源调度”，而不是像普通组件一样“想用就解码”。当你开始把峰值当成敌人，很多“偶现崩溃”会变成可控的降级行为。</p><h2 id="参考与引用" tabindex="-1">参考与引用 <a class="header-anchor" href="#参考与引用" aria-label="Permalink to &quot;参考与引用&quot;">​</a></h2><ol><li>PNG Specification：<a href="https://www.w3.org/TR/PNG/" target="_blank" rel="noreferrer">https://www.w3.org/TR/PNG/</a> （Bib: <code>png_spec</code>）</li><li>JPEG (ITU-T T.81)：<a href="https://www.w3.org/Graphics/JPEG/itu-t81.pdf" target="_blank" rel="noreferrer">https://www.w3.org/Graphics/JPEG/itu-t81.pdf</a> （Bib: <code>jpeg_t81</code>）</li><li>WebP docs：<a href="https://developers.google.com/speed/webp" target="_blank" rel="noreferrer">https://developers.google.com/speed/webp</a> （Bib: <code>webp_docs</code>）</li><li>AVIF specification (AOM)：<a href="https://aomediacodec.github.io/av1-avif/" target="_blank" rel="noreferrer">https://aomediacodec.github.io/av1-avif/</a> （Bib: <code>avif_spec</code>）</li></ol></div></div></main><footer class="VPDocFooter" data-v-55d9feae data-v-56184811><!--[--><!--]--><div class="edit-info" data-v-56184811><!----><div class="last-updated" data-v-56184811><p class="VPLastUpdated" data-v-56184811 data-v-849a375e>Last updated: <time datetime="2026-01-21T20:13:49.000Z" data-v-849a375e></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-56184811><span class="visually-hidden" id="doc-footer-aria-label" data-v-56184811>Pager</span><div class="pager" data-v-56184811><a class="VPLink link pager-link prev" href="/web-editor/07-fonts-history-and-secrets" data-v-56184811><!--[--><span class="desc" data-v-56184811>Previous page</span><span class="title" data-v-56184811>字体发展史与字体的秘密：从 OpenType 到编辑器排版管线</span><!--]--></a></div><div class="pager" data-v-56184811><a class="VPLink link pager-link next" href="/web-editor/09-layout-algorithms-constraint" data-v-56184811><!--[--><span class="desc" data-v-56184811>Next page</span><span class="title" data-v-56184811>约束布局与排版算法：编辑器如何把“文档”排成“可交互的版面”</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"about.md\":\"BOuT5Xqj\",\"about.prev.md\":\"BQgxr-AH\",\"about.reference.md\":\"7t6c_gbk\",\"ai-chitchat_01-ml-dl-basics-for-engineers.md\":\"CSGKLUmh\",\"ai-chitchat_02-diffusion-models-primer.md\":\"CgXvcQH6\",\"ai-chitchat_03-ecommerce-diffusion-practice.md\":\"DNuKoPoL\",\"ai-chitchat_04-llm-primer-for-engineers.md\":\"DFj5j7et\",\"ai-chitchat_05-ecommerce-llm-agent-practice.md\":\"2OVUGGlq\",\"ai-chitchat_06-ai-positioning-and-engineering-playbook.md\":\"DOY1c6D9\",\"ai-chitchat_07-vibecoding-three-horses-faster.md\":\"Ckw94XWx\",\"ai-chitchat___outline.md\":\"BemGlInV\",\"browser-rendering_01-chromium-architecture-processes-and-threads.md\":\"DGnUA3U4\",\"browser-rendering_02-blink-lifecycle-style-layout-paint.md\":\"ZIXhYsvb\",\"browser-rendering_03-cc-compositor-commit-activate-draw.md\":\"Cex6WzAq\",\"browser-rendering_04-viz-gpu-and-present-to-screen.md\":\"ChNkp0-R\",\"browser-rendering_05-input-latency-scroll-and-hit-test.md\":\"eyEnLM1m\",\"browser-rendering_06-v8-for-frontend-hiddenclass-ic-gc.md\":\"CDR1x51v\",\"browser-rendering_07-workers-offscreen-canvas-and-transfer-cost.md\":\"CqWrNVIC\",\"browser-rendering_08-performance-tracing-devtools-perfetto.md\":\"AtPS6R68\",\"browser-rendering_09-frontend-levers-css-composite-paint-budget.md\":\"CkrrnGje\",\"browser-rendering___outline.md\":\"Bv1SlDU_\",\"data-systems___outline.md\":\"BmGU4eM0\",\"ds-algorithms___outline.md\":\"4wxr6wUW\",\"frontend-architecture___outline.md\":\"Cdxl7-6Z\",\"index.md\":\"CWShnum0\",\"js-core___outline.md\":\"DMBo0gev\",\"okr_2021.md\":\"Cxlsal38\",\"okr_2022.md\":\"DfSlpXrp\",\"okr_2023.md\":\"C2u0sLp9\",\"okr_2024.md\":\"BYqUlAws\",\"performance___outline.md\":\"DNRdWFUF\",\"ten-years_2025-core-plus-plugins.md\":\"v7DR0KfE\",\"ten-years_2025-release-patterns.md\":\"DQrIb2jd\",\"ten-years_2025.md\":\"Bclmut9b\",\"web-editor_01-editor-architecture.md\":\"lRsdKxVi\",\"web-editor_02-collaboration-crdt-ot.md\":\"C942o2Qf\",\"web-editor_03-plugin-system.md\":\"DNyk1ILk\",\"web-editor_04-doc-storage-and-indexes.md\":\"DzdXlCjz\",\"web-editor_05-versioning-and-incremental-sync.md\":\"hIpenErk\",\"web-editor_06-open-source-editors-comparison.md\":\"DDGZ3jWP\",\"web-editor_07-fonts-history-and-secrets.md\":\"BfZHC_lv\",\"web-editor_08-images-history-and-secrets.md\":\"DPcy_uLE\",\"web-editor_09-layout-algorithms-constraint.md\":\"DplBRr8f\",\"web-editor_10-unicode-linebreak-bidi-grapheme.md\":\"BEMy2SAO\",\"web-editor_11-hit-testing-and-event-system.md\":\"MqCg7gRd\",\"web-editor_12-rendering-graphics-details.md\":\"D01JXebS\",\"web-editor___outline.md\":\"DI1aAM5K\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"2026\",\"description\":\"Book preview from source/_posts/2026\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"sidebar\":[{\"text\":\"目录\",\"collapsed\":false,\"items\":[{\"text\":\"引序\",\"link\":\"/\"},{\"text\":\"Web 编辑器与协同\",\"collapsed\":true,\"items\":[{\"text\":\"Web 编辑器：核心架构与“轮点”演进\",\"link\":\"/web-editor/01-editor-architecture\"},{\"text\":\"协同编辑：CRDT vs OT 的工程取舍（以及富文本的坑）\",\"link\":\"/web-editor/02-collaboration-crdt-ot\"},{\"text\":\"Web 编辑器插件体系：可扩展、可治理、可兜底\",\"link\":\"/web-editor/03-plugin-system\"},{\"text\":\"Web 编辑器的数据怎么存：Rope、Piece Table、区间树与红黑树\",\"link\":\"/web-editor/04-doc-storage-and-indexes\"},{\"text\":\"Web 编辑器如何增量提交与版本管理：op log、快照与可回放系统\",\"link\":\"/web-editor/05-versioning-and-incremental-sync\"},{\"text\":\"开源 Web 富文本横向对比：tiptap / ProseMirror / Slate / Lexical / Quill\",\"link\":\"/web-editor/06-open-source-editors-comparison\"},{\"text\":\"字体发展史与字体的秘密：从 OpenType 到编辑器排版管线\",\"link\":\"/web-editor/07-fonts-history-and-secrets\"},{\"text\":\"图片发展史与图片的秘密：格式、解码、色彩空间与编辑器性能\",\"link\":\"/web-editor/08-images-history-and-secrets\"},{\"text\":\"约束布局与排版算法：编辑器如何把“文档”排成“可交互的版面”\",\"link\":\"/web-editor/09-layout-algorithms-constraint\"},{\"text\":\"Unicode 行内排版三件套：Line Break / Bidi / Grapheme Break\",\"link\":\"/web-editor/10-unicode-linebreak-bidi-grapheme\"},{\"text\":\"点击测试（Hit Testing）与事件系统：从坐标到交互闭环\",\"link\":\"/web-editor/11-hit-testing-and-event-system\"},{\"text\":\"渲染图形学细节：矩阵、Shader、CPU/GPU 与瓦片化（Tiling）\",\"link\":\"/web-editor/12-rendering-graphics-details\"}]},{\"text\":\"浏览器底层与图形渲染\",\"collapsed\":true,\"items\":[{\"text\":\"Chromium 架构总览：多进程与线程模型\",\"link\":\"/browser-rendering/01-chromium-architecture-processes-and-threads\"},{\"text\":\"Blink 生命周期：style/layout/paint 与无效化\",\"link\":\"/browser-rendering/02-blink-lifecycle-style-layout-paint\"},{\"text\":\"cc 合成体系：两棵树、属性树与同步点\",\"link\":\"/browser-rendering/03-cc-compositor-commit-activate-draw\"},{\"text\":\"Viz/GPU/上屏：surface、buffer 与显示路径\",\"link\":\"/browser-rendering/04-viz-gpu-and-present-to-screen\"},{\"text\":\"输入与滚动：事件路由、命中与延迟下限\",\"link\":\"/browser-rendering/05-input-latency-scroll-and-hit-test\"},{\"text\":\"V8 细节（前端视角）：优化、deopt 与 GC\",\"link\":\"/browser-rendering/06-v8-for-frontend-hiddenclass-ic-gc\"},{\"text\":\"Worker：收益边界、OffscreenCanvas 与通信成本\",\"link\":\"/browser-rendering/07-workers-offscreen-canvas-and-transfer-cost\"},{\"text\":\"可观测：DevTools、Tracing/Perfetto 与归因方法\",\"link\":\"/browser-rendering/08-performance-tracing-devtools-perfetto\"},{\"text\":\"前端对照表：哪些写法对应哪条渲染管线\",\"link\":\"/browser-rendering/09-frontend-levers-css-composite-paint-budget\"}]},{\"text\":\"AI 碎碎念\",\"collapsed\":true,\"items\":[{\"text\":\"AI 碎碎念 01：机器学习与深度学习的浅尝即止（工程师够用版）\",\"link\":\"/ai-chitchat/01-ml-dl-basics-for-engineers\"},{\"text\":\"AI 碎碎念 02：扩散模型从 DDPM 到 DiT（用类比讲清楚加噪与去噪）\",\"link\":\"/ai-chitchat/02-diffusion-models-primer\"},{\"text\":\"AI 碎碎念 03：电商里的扩散模型折腾记（Mask、Inpaint、Outpaint 到虚拟试衣）\",\"link\":\"/ai-chitchat/03-ecommerce-diffusion-practice\"},{\"text\":\"AI 碎碎念 04：LLM 够用版原理（Transformer、上下文与概率）\",\"link\":\"/ai-chitchat/04-llm-primer-for-engineers\"},{\"text\":\"AI 碎碎念 05：电商里的 LLM 落地（Agent、Prompt 与 A2UI）\",\"link\":\"/ai-chitchat/05-ecommerce-llm-agent-practice\"},{\"text\":\"AI 碎碎念 06：我的定位与工程人的做法（不神化，不自卑）\",\"link\":\"/ai-chitchat/06-ai-positioning-and-engineering-playbook\"},{\"text\":\"AI 碎碎念 07：从 Vibe Coding 到 Spec-Driven Dev：四个轮子复刻 Faster\",\"link\":\"/ai-chitchat/07-vibecoding-three-horses-faster\"}]},{\"text\":\"工作的碎碎念\",\"collapsed\":true,\"items\":[{\"text\":\"为什么重交互产品都长成 Core + Plugins\",\"link\":\"/ten-years/2025-core-plus-plugins\"},{\"text\":\"四种发版节奏对比\",\"link\":\"/ten-years/2025-release-patterns\"},{\"text\":\"2025：十年再回首我的工作经历\",\"link\":\"/ten-years/2025\"}]}]}],\"outline\":\"deep\",\"search\":{\"provider\":\"local\"}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":true}");</script>
    
  </body>
</html>